# skeleton-ui Specification

## Purpose
TBD - created by archiving change improve-layout-stability. Update Purpose after archive.
## Requirements
### Requirement: スケルトンUIの基本構造

作品情報パネルはスケルトンUI（プレースホルダー）を実装し、コンテンツ読み込み中に表示しなければならない（MUST）。

#### Scenario: 作品情報読み込み開始時

**Given** ユーザーが新しい作品に切り替えた時
**When** 作品情報の読み込みが開始される
**Then** スケルトンUIが即座に表示される
**And** スケルトンはポスター画像、タイトル、あらすじの領域を含む
**And** スケルトンはアニメーションで「読み込み中」を表現する

#### Scenario: 作品情報読み込み完了時

**Given** スケルトンUIが表示されている状態
**When** 作品情報の読み込みが完了する
**Then** スケルトンUIがフェードアウトする
**And** 実際のコンテンツがフェードインで表示される
**And** レイアウトシフトが発生しない

### Requirement: スケルトンのビジュアルデザイン

スケルトンUIは視覚的に「読み込み中」であることを明確に伝えなければならない（MUST）。

#### Scenario: スケルトンの外観

**Given** スケルトンUIが表示されている時
**Then** 背景色はパネルの背景より明るいグレー系の色
**And** グラデーションが左から右へ流れるアニメーションが実行される
**And** アニメーションは滑らかで、1.5秒周期で繰り返される

#### Scenario: スケルトンの形状

**Given** スケルトンUIが表示されている時
**Then** ポスター画像用スケルトンは2:3のアスペクト比を持つ
**And** タイトル用スケルトンは高さ2rem、幅80%の矩形
**And** あらすじ用スケルトンは3行分の矩形（各行高さ1rem、行間0.5rem）

### Requirement: レスポンシブ対応

スケルトンUIは横並び・縦スクロール両方のレイアウトで適切に表示されなければならない（MUST）。

#### Scenario: 横並びレイアウト（>1024px）

**Given** ブラウザ幅が1024pxより大きい時
**When** スケルトンUIが表示される
**Then** ポスター画像スケルトンは幅clamp(160px, 20vw, 240px)で表示される
**And** 詳細情報スケルトンは右側に配置される

#### Scenario: 縦スクロールレイアウト（≤1024px）

**Given** ブラウザ幅が1024px以下の時
**When** スケルトンUIが表示される
**Then** ポスター画像スケルトンは中央に配置され、幅min(60%, 180px)で表示される
**And** 詳細情報スケルトンは下側に配置される

### Requirement: パフォーマンス要件

スケルトンUIはパフォーマンスに悪影響を与えてはならない（MUST）。

#### Scenario: アニメーションのパフォーマンス

**Given** スケルトンUIが表示されている時
**When** アニメーションが実行される
**Then** GPU加速（transform, opacity）のみを使用する
**And** layoutやpaintをトリガーするプロパティ（width, height等）は変更しない

#### Scenario: CLS（Cumulative Layout Shift）の改善

**Given** 作品情報の読み込みが完了する時
**When** スケルトンから実コンテンツに切り替わる
**Then** レイアウトシフトが発生しない（CLS = 0）
**And** コンテンツのサイズがスケルトンと一致する

### Requirement: エラーハンドリング

読み込みエラー時もスケルトンUIを適切に処理しなければならない（MUST）。

#### Scenario: 画像読み込み失敗時

**Given** ポスター画像の読み込みに失敗した時
**Then** スケルトンUIが非表示になる
**And** プレースホルダー画像（"No Image"）が表示される
**And** レイアウトシフトが発生しない

#### Scenario: API通信失敗時

**Given** 作品情報APIの取得に失敗した時
**Then** スケルトンUIが非表示になる
**And** エラーメッセージが表示される
**And** 次の作品への自動遷移が実行される

