# Implementation Tasks

## 1. HTMLに配信サービスモーダルを追加
- [x] `client/index.html` にジャンルフィルターモーダルと同様の構造で配信サービスモーダルを追加
- [x] モーダルのID: `provider-filter-modal`
- [x] 開閉ボタン、バックドロップ、コンテンツエリアを含める
- [x] 6つの配信サービスチェックボックスをモーダル内に配置

## 2. コントロールパネルを簡素化
- [x] `client/index.html` のコントロールパネルから6つのチェックボックスを削除
- [x] 「配信サービスで絞り込み」ボタンを追加（ジャンルボタンと同様のスタイル）
- [x] ボタンのID: `provider-filter-toggle`

## 3. JavaScriptでモーダルの開閉処理を実装
- [x] `client/script.js` に配信サービスモーダルのDOM要素を取得
- [x] モーダルの開閉イベントハンドラーを追加（ジャンルモーダルと同様）
- [x] バックドロップクリックで閉じる処理を追加
- [x] Escキーで閉じる処理を追加（既存のジャンルモーダルと統合）

## 4. モーダル開閉時のUI自動非表示制御を実装
- [x] モーダルが開いている状態を追跡するフラグを追加（例: `isModalOpen`）
- [x] 配信サービスモーダルまたはジャンルフィルターモーダルが開いたときにフラグをtrueに設定
- [x] モーダルが閉じたときにフラグをfalseに設定
- [x] `hideUI()` 関数を修正し、モーダルが開いている場合はUIを非表示にしないように制御
- [x] モーダル開閉時に `isInteracting` フラグも適切に設定
- [x] ビデオエリアクリック時のUI切り替え処理で、モーダルが開いている場合は切り替えを無効化

## 5. 既存のチェックボックス参照を更新
- [x] `client/script.js` の各配信サービスチェックボックスのID参照を更新
- [x] モーダル内の新しいIDに対応させる

## 6. CSSスタイリングを追加
- [x] `client/style.css` に配信サービスモーダルのスタイルを追加
- [x] ジャンルフィルターモーダルと統一されたデザインを適用
- [x] モバイル対応のレスポンシブスタイルを追加

## 7. 動作確認
- [x] すべての配信サービスチェックボックスが正常に機能することを確認
- [x] モーダルの開閉が正常に動作することを確認
- [x] 適用/リセットボタンとの連携が正常に動作することを確認
- [x] モバイル環境でのUIオーバーフローが解消されたことを確認
- [x] モーダル開閉中にUIが自動非表示にならないことを確認
- [x] モーダルを閉じた後、UIが正常に自動非表示になることを確認

## 8. コミット
- [x] 変更をコミット

## 追加実装（UIコンパクト化）
- [x] オーバーレイUIのヘッダー（タイトルとキャッチフレーズ）を削除
- [x] コントロールパネルの「並び順」タイトルを削除
- [x] 説明文「フィルター条件を変更したら〜」を削除
- [x] コントロールパネルのpadding・gap調整でスペース削減
- [x] 変更をコミット
