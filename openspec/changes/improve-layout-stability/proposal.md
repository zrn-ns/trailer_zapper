# スケルトンUIによるレイアウト安定化

## 概要

オーバーレイUIにおいて、特に縦スクロール表示時に作品情報の読み込みタイミングで画面レイアウトが乱れる問題を解決します。スケルトンUI（プレースホルダー）を導入することで、コンテンツ読み込み前から領域を確保し、視覚的なフィードバックも提供します。

## 問題

現在、以下の問題が発生しています:

1. **作品情報パネルの動的な高さ変化**
   - ポスター画像、タイトル、あらすじの読み込みタイミングで高さが変化
   - 特に縦スクロールレイアウト（≤1024px）で顕著

2. **ユーザー体験への影響**
   - レイアウトシフトによる視覚的な違和感
   - コンテンツが突然移動することで操作性が低下
   - 読み込み状態が不明瞭

## 解決策

### スケルトンUIの導入

コンテンツ読み込み中にプレースホルダーを表示し、以下を実現します:

1. **領域の事前確保**
   - ポスター画像、タイトル、あらすじの表示領域を事前に確保
   - アスペクト比を考慮した適切なサイズ設定

2. **視覚的フィードバック**
   - アニメーションによる読み込み中表示
   - ユーザーに処理が進行中であることを明示

3. **段階的なコンテンツ表示**
   - 読み込み完了時にスムーズにコンテンツを表示
   - フェードインアニメーションによる自然な切り替え

## 実装方針

### 1. スケルトンコンポーネント

- `.skeleton` クラスによる共通スタイル
- グラデーションアニメーションで読み込み中を表現
- 各要素（画像、タイトル、テキスト）ごとのバリエーション

### 2. CSS実装

- アスペクト比の確保（ポスター画像: 2:3）
- 適切な最小高さの設定
- アニメーション定義

### 3. JavaScript実装

- 作品情報読み込み前にスケルトンHTMLを挿入
- 読み込み完了後、実際のコンテンツに置き換え
- 画像のpreloadによる読み込み最適化

## メリット

1. **レイアウトの安定化**: コンテンツ読み込み前から正確なスペースを確保
2. **UXの向上**: ユーザーに処理状況を視覚的に伝達
3. **パフォーマンス知覚の改善**: 読み込み時間が長く感じられない
4. **モダンなUI**: 主要サービス（YouTube, Netflix等）で採用されている標準的な手法

## 関連ファイル

- `client/index.html`: スケルトン構造の定義
- `client/style.css`: スケルトンスタイルとアニメーション
- `client/script.js`: スケルトン表示/非表示ロジック

## 参考

- [Cumulative Layout Shift (CLS) - Web Vitals](https://web.dev/cls/)
- [Building Skeleton Screens with CSS Custom Properties](https://css-tricks.com/building-skeleton-screens-css-custom-properties/)
