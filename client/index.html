<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="次に観る映画をシネマティックに発見しよう。">
    <title>Trailer Zapper</title>

    <!-- OGP (Open Graph Protocol) -->
    <meta property="og:title" content="Trailer Zapper">
    <meta property="og:description" content="次に観る映画をシネマティックに発見しよう。">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://trailer-zapper.vercel.app/">
    <meta property="og:image" content="https://trailer-zapper.vercel.app/ogp.png">
    <meta property="og:site_name" content="Trailer Zapper">
    <meta property="og:locale" content="ja_JP">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Trailer Zapper">
    <meta name="twitter:description" content="次に観る映画をシネマティックに発見しよう。">
    <meta name="twitter:image" content="https://trailer-zapper.vercel.app/ogp.png">

    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" href="style.css?v=4">
</head>
<body>
    <div id="immersive-stage" class="immersive-stage">
        <button id="ui-toggle-button" class="ui-toggle-button" style="visibility: hidden;" tabindex="-1">◉</button>
        <button id="about-button" class="about-button" style="visibility: hidden;" tabindex="-1">ⓘ</button>
        <div class="video-layer">
            <div class="player-shell">
                <div id="player-container" class="player-screen"></div>
                <div id="player-overlay" class="player-overlay hidden">
                    <div class="film-grain"></div>
                </div>
                <!-- iOS Safari専用フローティングミュート解除ボタン -->
                <button id="ios-unmute-button" class="ios-unmute-floating" style="display: none;">
                    <span class="unmute-icon">🔇</span>
                    <span class="unmute-text">タップして音声ON</span>
                </button>
            </div>
        </div>

        <div id="app" class="ui-layer startup-hidden">
            <header class="hero-header">
                <h1>Trailer Zapper</h1>
                <p class="hero-tagline">次に観る映画をシネマティックに発見しよう。</p>
            </header>

            <div class="hud">
                <aside class="control-panel">
                    <div class="panel-section">
                        <h3>配信サービス</h3>
                        <div class="provider-filters">
                            <label>
                                <input type="checkbox" name="provider" value="8" id="netflix-filter" checked> Netflix
                            </label>
                            <label>
                                <input type="checkbox" name="provider" value="9" id="prime-video-filter" checked> Prime Video
                            </label>
                            <label>
                                <input type="checkbox" name="provider" value="15" id="hulu-filter" checked> Hulu
                            </label>
                            <label>
                                <input type="checkbox" name="provider" value="84" id="u-next-filter" checked> U-NEXT
                            </label>
                            <label>
                                <input type="checkbox" name="provider" value="337" id="disney-plus-filter" checked> Disney Plus
                            </label>
                            <label>
                                <input type="checkbox" name="provider" value="350" id="apple-tv-plus-filter" checked> Apple TV+
                            </label>
                        </div>
                    </div>
                    <div class="panel-section">
                        <h3>並び順</h3>
                        <select id="sort-order" class="sort-select">
                            <option value="popularity.desc">人気順（高い順）</option>
                            <option value="popularity.asc">人気順（低い順）</option>
                            <option value="release_date.desc">公開日（新しい順）</option>
                            <option value="release_date.asc">公開日（古い順）</option>
                            <option value="vote_average.desc">評価順（高い順）</option>
                            <option value="vote_average.asc">評価順（低い順）</option>
                            <option value="vote_count.desc">投票数順（多い順）</option>
                            <option value="vote_count.asc">投票数順（少ない順）</option>
                            <option value="revenue.desc">興行収入順（高い順）</option>
                            <option value="revenue.asc">興行収入順（低い順）</option>
                            <option value="original_title.asc">タイトル順（A-Z）</option>
                            <option value="original_title.desc">タイトル順（Z-A）</option>
                        </select>
                    </div>
                    <div class="panel-section">
                        <button id="genre-filter-toggle" class="ghost-button">ジャンルで絞り込み</button>
                    </div>
                    <div class="panel-section panel-section--buttons">
                        <button id="apply-filters-button" class="primary-button">適用</button>
                        <button id="reset-filters-button" class="ghost-button">リセット</button>
                    </div>
                    <p class="panel-hint">フィルター条件を変更したら「適用」ボタンをクリックして反映してください。</p>
                </aside>

                <section id="movie-info" class="info-panel"></section>
            </div>

            <div class="controls">
                <button id="prev-button" class="primary-button">⏮</button>
                <button id="pause-button" class="primary-button">⏸</button>
                <button id="next-button" class="primary-button">⏭</button>
                <button id="fullscreen-button" class="primary-button">⛶</button>
            </div>
        </div>
    </div>
    <!-- 映画館スクリーン背景 -->
    <div id="theater-screen" class="theater-screen"></div>

    <!-- 暗転オーバーレイ（映画館の照明が落ちる演出） -->
    <div id="dimming-overlay" class="dimming-overlay"></div>

    <div id="start-modal" class="start-modal">
        <div class="start-modal__content">
            <div class="cinema-ornament">◆</div>
            <h2>TRAILER ZAPPER</h2>
            <p class="start-modal__welcome">次に観る映画をシネマティックに発見しよう。</p>

            <div class="start-modal__guide">
                <p class="start-modal__guide-text">全画面にして、集中して予告映像をお楽しみください。</p>
            </div>

            <div class="start-modal__buttons">
                <button id="fullscreen-start-button" class="secondary-button">全画面で観る</button>
                <button id="start-button" class="primary-button">上映開始</button>
            </div>

            <div class="cinema-ornament">◆</div>
        </div>
    </div>

    <!-- ジャンルフィルターモーダル -->
    <div id="genre-filter-modal" class="genre-filter-modal hidden">
        <div class="genre-filter-modal__backdrop"></div>
        <div class="genre-filter-modal__content">
            <div class="genre-filter-modal__header">
                <h3>ジャンルで絞り込み</h3>
                <button id="genre-filter-close" class="ghost-button" aria-label="閉じる">✕</button>
            </div>
            <div id="genre-filter-list" class="genre-filter-modal__list"></div>
        </div>
    </div>

    <!-- 情報モーダル -->
    <div id="about-modal" class="about-modal hidden">
        <div class="about-modal__backdrop"></div>
        <div class="about-modal__content">
            <div class="about-modal__header">
                <h3>アプリケーション情報</h3>
                <button id="about-modal-close" class="ghost-button" aria-label="閉じる">✕</button>
            </div>
            <div class="about-modal__body">
                <section class="about-section about-section--app">
                    <h4>Trailer Zapper</h4>
                    <p>次に観る映画をシネマティックに発見しよう。</p>
                </section>

                <section class="about-section">
                    <h4>データ提供</h4>
                    <div class="tmdb-logo">
                        <a href="https://www.themoviedb.org" target="_blank" rel="noopener noreferrer">
                            <img src="https://www.themoviedb.org/assets/2/v4/logos/v2/blue_square_1-5bdc75aaebeb75dc7ae79426ddd9be3b2be1e342510f8202baf6bffa71d7f5c4.svg" alt="The Movie Database (TMDB)">
                        </a>
                        <p>このアプリケーションは<a href="https://www.themoviedb.org" target="_blank" rel="noopener noreferrer">TMDB API</a>を使用していますが、TMDBによって承認または認定されたものではありません。</p>
                    </div>
                </section>

                <section class="about-section">
                    <h4>効果音</h4>
                    <p><a href="https://otologic.jp" target="_blank" rel="noopener noreferrer">OtoLogic</a> (CC BY 4.0)</p>
                </section>

                <section class="about-section">
                    <h4>作者</h4>
                    <p><a href="https://x.com/zrnbtn" target="_blank" rel="noopener noreferrer">@zrnbtn</a></p>
                </section>

                <section class="about-section">
                    <h4>ソースコード</h4>
                    <p><a href="https://github.com/zrn-ns/trailer_zapper" target="_blank" rel="noopener noreferrer">GitHub</a></p>
                </section>
            </div>
        </div>
    </div>

    <script src="script.js?v=5"></script>
</body>
</html>
